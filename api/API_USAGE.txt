================================================================================
DISPOSABLE UI AGENT - API USAGE GUIDE
================================================================================

Quick Start:
1. Install dependencies: pip install -r requirements.txt
2. Start API server: python start_api.py
3. Test API: python test_api.py

================================================================================
STARTING THE API SERVER
================================================================================

Basic:
    python start_api.py

Custom Port:
    python start_api.py --port 8080

Development Mode (auto-reload):
    python start_api.py --reload

Custom Host:
    python start_api.py --host 127.0.0.1 --port 8000

================================================================================
API ENDPOINTS
================================================================================

1. Health Check
   GET http://localhost:8000/health
   
   Response:
   {
     "status": "healthy",
     "agent_initialized": true,
     "version": "1.0.0"
   }

2. Generate Layout (Single)
   POST http://localhost:8000/generate
   
   Request:
   {
     "query": "show me all leads",
     "data": null,  // Optional: provide your own data
     "context": {}  // Optional: additional context
   }
   
   Response:
   {
     "success": true,
     "layout": {
       "id": "layout_...",
       "query": "show me all leads",
       "object_type": "lead",
       "layout_type": "list",
       "sections": [...],
       "data": [...],
       "metadata": {...}
     },
     "query": "show me all leads",
     "execution_time_ms": 1234.56
   }

3. Generate Layouts (Batch)
   POST http://localhost:8000/generate-batch
   
   Request:
   {
     "queries": [
       "show me all leads",
       "display contacts",
       "sales dashboard"
     ]
   }
   
   Response:
   {
     "success": true,
     "results": [...],
     "total": 3,
     "successful": 3,
     "failed": 0
   }

4. API Documentation
   GET http://localhost:8000/docs
   
   Interactive Swagger UI documentation

================================================================================
TESTING THE API
================================================================================

Automated Test:
    python test_api.py

This will test:
- Health check
- All object types (Lead, Contact, Case, Account, Branch, Product)
- Batch generation
- Save results to test_output/api/

Manual Test with curl:

    # Health check
    curl http://localhost:8000/health

    # Generate layout
    curl -X POST http://localhost:8000/generate \
      -H "Content-Type: application/json" \
      -d '{"query": "show me all leads"}'

    # Batch generate
    curl -X POST http://localhost:8000/generate-batch \
      -H "Content-Type: application/json" \
      -d '{"queries": ["show leads", "show contacts"]}'

Manual Test with Python:

    import requests
    
    # Generate layout
    response = requests.post(
        "http://localhost:8000/generate",
        json={"query": "show me all leads"}
    )
    
    result = response.json()
    print(result['layout'])

================================================================================
EXAMPLE QUERIES
================================================================================

Leads:
    "show me all leads"
    "display top 5 leads by revenue"
    "show qualified leads"

Contacts:
    "show all contacts"
    "display contact list"
    "view team members"

Cases:
    "show all open cases"
    "display high priority tickets"
    "list my cases"

Accounts:
    "show all accounts"
    "display enterprise accounts"
    "account performance dashboard"

Branches:
    "show all branches"
    "display branch performance"
    "branch comparison by region"

Products:
    "show product catalog"
    "display all products"
    "show low stock items"

Dashboards:
    "sales dashboard with metrics"
    "account performance dashboard"
    "branch revenue dashboard"

================================================================================
RESPONSE STRUCTURE
================================================================================

Layout Response:
{
  "id": "layout_abc123",
  "query": "show me all leads",
  "object_type": "lead",
  "layout_type": "list",
  "sections": [
    {
      "section_id": "section_1",
      "title": "Leads",
      "rows": [
        {
          "row_id": "row_1",
          "components": [
            {
              "type": "Stack",
              "props": {"direction": "vertical"},
              "children": [...]
            }
          ]
        }
      ]
    }
  ],
  "data": [...],
  "metadata": {
    "object_type": "lead",
    "record_count": 7,
    "generated_at": "2024-02-09T10:30:00Z"
  },
  "reasoning": "Using list pattern for multiple leads..."
}

================================================================================
ERROR HANDLING
================================================================================

If generation fails:
{
  "success": false,
  "error": "Error message here",
  "query": "show me all leads",
  "execution_time_ms": 123.45
}

Common errors:
- OpenAI API key not set
- Invalid query format
- Network issues

================================================================================
PERFORMANCE
================================================================================

Typical response times:
- Simple list: 500-1500ms
- Complex dashboard: 1000-2500ms
- Batch (5 queries): 3000-6000ms

The first request may be slower due to:
- Agent initialization
- Vector index loading
- Model loading

Subsequent requests are faster (cached).

================================================================================

