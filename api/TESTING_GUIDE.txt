================================================================================
DISPOSABLE UI AGENT - TESTING GUIDE
================================================================================

Your agent is ready to test! Here are 3 ways to test it:

================================================================================
METHOD 1: DIRECT TEST (Recommended First)
================================================================================

This tests the agent directly without needing an API server.

Step 1: Set your OpenAI API key
    Create a .env file with:
    OPENAI_API_KEY=your_key_here

Step 2: Run the direct test
    python test_direct.py

What it does:
- Tests all 7 object types (Lead, Contact, Deal, Case, Account, Branch, Product)
- Saves results to test_output/direct/
- Shows detailed output for each test
- No API server needed!

Expected output:
    âœ… Success!
       Layout Type: list
       Object Type: lead
       Sections: 1
       Data Records: 7
       Saved to: test_output/direct/lead.json

================================================================================
METHOD 2: API TEST (Full Stack)
================================================================================

This tests the complete API server.

Step 1: Install dependencies (if not already installed)
    pip install fastapi uvicorn requests

Step 2: Start the API server (in one terminal)
    python start_api.py

    You should see:
    ðŸš€ Starting Disposable UI Agent API
    ðŸ“– API Documentation: http://0.0.0.0:8000/docs
    INFO:     Uvicorn running on http://0.0.0.0:8000

Step 3: Run the API test (in another terminal)
    python test_api.py

What it does:
- Tests health check endpoint
- Tests all object types via API
- Tests batch generation
- Saves results to test_output/api/
- Shows API response times

Expected output:
    âœ… Health Check: healthy
    âœ… Success!
       Layout Type: list
       API Time: 1234.56ms
       Agent Time: 1200.00ms

================================================================================
METHOD 3: MANUAL API TEST (Interactive)
================================================================================

Step 1: Start the API server
    python start_api.py

Step 2: Open your browser
    http://localhost:8000/docs

Step 3: Try the interactive API documentation
    - Click on "POST /generate"
    - Click "Try it out"
    - Enter a query: {"query": "show me all leads"}
    - Click "Execute"
    - See the generated layout!

Step 4: Or use curl
    curl -X POST http://localhost:8000/generate \
      -H "Content-Type: application/json" \
      -d '{"query": "show me all leads"}'

================================================================================
WHAT TO TEST
================================================================================

Test Queries for Each Object Type:

LEAD:
    "show me all leads"
    "display top 5 leads by revenue"
    "show qualified leads"

CONTACT:
    "show all contacts"
    "display contact list"
    "view team members"

DEAL:
    "show my deals"
    "display opportunities"
    "sales pipeline view"

CASE:
    "show all open cases"
    "display high priority tickets"
    "list my cases"

ACCOUNT:
    "show all accounts"
    "display enterprise accounts"
    "account performance dashboard"

BRANCH:
    "show all branches"
    "display branch performance"
    "branch comparison by region"

PRODUCT:
    "show product catalog"
    "display all products"
    "show low stock items"

================================================================================
EXPECTED RESULTS
================================================================================

Each test should generate a JSON layout with:

1. Layout Structure:
   - sections: Array of layout sections
   - rows: Rows within each section
   - components: UI components (Stack, Card, Table, etc.)

2. Data Binding:
   - binds_to: Field names from data
   - repeat: For repeating components
   - value: Static values

3. Metadata:
   - object_type: Detected object type
   - layout_type: list, detail, dashboard, etc.
   - record_count: Number of data records

4. Data:
   - Actual data records used in the layout

Example output structure:
{
  "id": "layout_abc123",
  "query": "show me all leads",
  "object_type": "lead",
  "layout_type": "list",
  "sections": [...],
  "data": [...],
  "metadata": {...}
}

================================================================================
TROUBLESHOOTING
================================================================================

Problem: "OPENAI_API_KEY not set"
Solution: Create .env file with your OpenAI API key

Problem: "Module not found: fastapi"
Solution: pip install fastapi uvicorn requests

Problem: "Agent initialization failed"
Solution: Check that all files are in place:
    - agent/structured_ui_agent_v2.py
    - agent/query_analyzer.py
    - agent/candidate_retriever.py
    - agent/data_fetcher.py
    - agent/layout_generator.py

Problem: "Vector store not found"
Solution: The agent works without vector store (uses mock retrieval)
    To build vector store: python build_vector_index.py

Problem: API server won't start
Solution: Check if port 8000 is already in use
    Try: python start_api.py --port 8080

================================================================================
NEXT STEPS AFTER TESTING
================================================================================

Once tests pass:

1. Review generated layouts in test_output/
2. Check if layouts match your expectations
3. Add more object types if needed (in data_fetcher.py)
4. Connect to real database (replace mock data)
5. Deploy API to production
6. Integrate with your frontend

================================================================================
FILES CREATED
================================================================================

API Files:
    api/main.py - FastAPI server
    api/__init__.py - Package init
    start_api.py - Server startup script

Test Files:
    test_direct.py - Direct agent test (no API)
    test_api.py - API endpoint test
    test_all_objects.py - Comprehensive test

Documentation:
    API_USAGE.txt - API usage guide
    TESTING_GUIDE.txt - This file
    OBJECT_TYPES_REFERENCE.txt - Object types reference

Agent Files:
    agent/structured_ui_agent_v2.py - Main orchestrator
    agent/query_analyzer.py - Query analysis
    agent/candidate_retriever.py - Pattern retrieval
    agent/data_fetcher.py - Data fetching (with 7 object types!)
    agent/layout_generator.py - Layout generation

================================================================================

